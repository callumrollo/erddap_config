#update system
sudo apt update
sudo apt upgrade
#install JDK
sudo apt install default-jdk
###
#Install and configure Tomcat
###
#create tomcat group and user
sudo groupadd tomcat
sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat
#download tomcat
cd /tmp
wget https://www.mirrorservice.org/sites/ftp.apache.org/tomcat/tomcat-9/v9.0.33/bin/apache-tomcat-9.0.33.tar.gz
#create tomcat home directory
sudo mkdir /opt/tomcat
#unpack tomcat files to tomcat home directory
sudo tar xzvf apache-tomcat-*tar.gz -C /opt/tomcat --strip-components=1
#modify ACLS (file permissions) of tomcat directory structure
sudo chgrp -R tomcat /opt/tomcat
sudo chmod -R g+r /opt/tomcat/conf
sudo chmod g+x /opt/tomcat/conf
sudo chown -R tomcat /opt/tomcat/webapps/ /opt/tomcat/work/ /opt/tomcat/temp/ /opt/tomcat/logs/
#create systemd service file (pull from github repo)
cp erddap_config/files/tomcat.service /etc/systemd/system/tomcat.service
#May require editing of JAVA_HOME and Memory Allocation
#JAVA_HOME = sudo update-java-alternatives -l
#sudo nano /etc/systemd/system/tomcat.service
   21  sudo systemctl daemon-reload
   22  sudo systemctl start tomcat
   23  sudo systemctl status tomcat
   24  sudo ufw allow 8080
   25  sudo ufw allow 22
   26  sudo ufw enable
   27  sudo systemctl enable tomcat
   28  sudo nano /opt/tomcat/conf/tomcat-users.xml
   29  sudo nano /opt/tomcat/webapps/manager/META-INF/context.xml
   30  sudo nano /opt/tomcat/webapps/host-manager/META-INF/context.xml
   31  sudo systemctl restart tomcat
   32  ls -l
   33  sudo apt install apache2
   34  sudo find / -name apache
   35  sudo find / -name apache.conf
   36  sudo find / -name apache2.conf
   37  ls -l /etc/apache2
   38  cd /tmp
   39  curl -O https://github.com/BobSimons/erddap/releases/download/v2.02/erddapContent.zip
   40  unzip
   41  sudo apt install unzip
   42  unzip erddapContent.zip 
   43  unzip erddapContent.zip
   44  ls
   45  rm erddapContent.zip 
   46  wget https://github.com/BobSimons/erddap/releases/download/v2.02/erddapContent.zip
   47  unzip erddapContent.zip
   48  mv content /opt/tomcat/
   49  sudo mv content /opt/tomcat/
   50  ls -l /opt/tomcat
   51  sudo chown -R tomcat:tomcat /opt/tomcat/content
   52  ls -l /opt/tomcat
   53  sudo mkdir /home/erddap
   54  sudo chown -R tomcat:tomcat /home/erddap
   55  sudo nano /opt/tomcat/content/erddap/setup.xml 
   56  sudo nano /opt/tomcat/conf/server.xml
   57  sudo nano /opt/tomcat/conf/context.xml
   58  sudo nano /etc/apache2/apache2.conf
   59  sudo find / -name apachectl
   60  /usr/sbin/apachectl -k graceful
   64  wget https://github.com/BobSimons/erddap/releases/download/v2.02/erddap.war
   65  ls
   66  mv erddap.war /opt/tomcat/webapps/erddap.war
   67  sudo mv erddap.war /opt/tomcat/webapps/erddap.war
   68  sudo chown tomcat:tomcat /opt/tomcat/webapps/erddap.war
   69  ls -l /opt/tomcat/
   70  ls -l /opt/tomcat/webapps/
   71  sudo ls -l /opt/tomcat/webapps/
   72  ls
   73  mkdir /erddap_config
   74  ls
   75  pwd
   76  mkdir erddap_config
   77  ls
   78  cd erddap_config/
